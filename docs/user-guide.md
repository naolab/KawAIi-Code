# AI-Kawaii-Project-ui ユーザーガイド

## 概要

AI-Kawaii-Project-uiは、Claude Code AIアシスタントと3D VRMキャラクターを組み合わせた、音声合成機能付きのターミナル統合開発環境です。

## 基本機能

### 1. AIアシスタント機能

#### 1.1 Claude Code統合
- **Claude Code (通常版)**: 標準のClaude Codeを起動
- **Claude Code (Dangerous版)**: 権限チェックをスキップした危険モード
- **動的プロンプト生成**: 起動時に自動でAI.mdプロンプトファイルを生成

#### 1.2 起動方法
1. 「開始」ボタンをクリック
2. AIアシスタントのモードを選択
3. ターミナルでClaude Codeとリアルタイム対話

#### 1.3 停止方法
- 「停止」ボタンをクリックで即座に終了
- 停止時にAI.mdファイルは自動削除

### 2. ターミナル機能

#### 2.1 基本操作
- **xterm.js**: フル機能のターミナルエミュレーション
- **タブ機能**: 複数のターミナルを同時管理
- **表示切り替え**: 眼のアイコンでターミナルの表示/非表示

#### 2.2 タブ管理
- **新しいタブ**: 「+」ボタンでタブを追加
- **タブ切り替え**: タブをクリックで切り替え
- **ドラッグ&ドロップ**: タブの順序を変更可能
- **親タブ設定**: 音声読み上げ対象のタブを指定

### 3. 音声合成システム

#### 3.1 デュアル音声モード

**📱 アプリ内のみで読み上げ（推奨）**
- **使用場面**: このアプリのターミナルでClaude Codeを起動して作業
- **メリット**: 
  - このアプリだけで音声が流れる
  - より確実で安定した動作
  - 音声の制御がしやすい
- **デメリット**: 他の場所のターミナルは読み上げされない

**🔧 Claude Code Hooksで読み上げ**
- **使用場面**: 他のエディターや別のターミナルでClaude Codeを使いたい時
- **メリット**:
  - どこでClaude Codeを起動しても音声読み上げが働く
  - 高度な感情分析で表情がより自然に変化
  - 複数のターミナルを同時に監視
- **デメリット**: 複数のターミナルで同時に音声が流れることがある

#### 3.2 音声エンジン
- **AivisSpeech**: ローカルAPI (http://127.0.0.1:10101)
- **話者選択**: 複数の音声キャラクターから選択
- **音量調整**: 0-100の範囲で調整可能
- **読み上げ間隔**: 0-6秒の範囲で調整可能

#### 3.3 音声制御
- **再接続**: 音声エンジンとの接続を再試行
- **音声停止**: 現在の音声読み上げを停止
- **重複スキップ**: 同じテキストの重複読み上げを自動回避

### 4. 3D VRMキャラクター

#### 4.1 キャラクター表示
- **3D VRMモデル**: 高品質な3Dキャラクター
- **アイドルアニメーション**: 自然な待機モーション
- **カメラ制御**: マウスで視点を自由に変更

#### 4.2 感情表現システム
- **感情分析**: テキストから感情を自動解析
- **表情制御**: 感情に応じた表情変更
- **複合感情**: 複数の感情を同時に表現

#### 4.3 リップシンク
- **音声同期**: 音声再生時の口の動き
- **リアルタイム**: 音声と完全に同期したアニメーション

### 5. 壁紙システム

#### 5.1 壁紙の種類
- **デフォルト壁紙**: 時間帯に応じた自動切り替え
- **カスタム壁紙**: ユーザーがアップロードした画像

#### 5.2 時間帯別壁紙
- **朝 (4:00-6:00)**: 朝夕用壁紙
- **昼 (6:00-17:00)**: 昼用壁紙
- **夕 (17:00-19:00)**: 朝夕用壁紙
- **夜 (19:00-23:00)**: 夜用壁紙
- **深夜 (23:00-4:00)**: 深夜用壁紙

#### 5.3 壁紙の設定
- **アニメーション**: 動画壁紙の有効/無効
- **壁紙アップロード**: 画像ファイルをアップロード
- **自動切り替え**: 1分間隔で時間帯をチェック

## 操作方法

### 1. 基本操作

#### 1.1 ヘッダー部分
- **⚙️ 設定ボタン**: 設定モーダルを開く
- **❓ ヘルプボタン**: 使い方ガイドを表示
- **👁️ ターミナル切り替え**: ターミナルの表示/非表示
- **▶️ 開始ボタン**: AIアシスタントを起動
- **⏹️ 停止ボタン**: AIアシスタントを停止

#### 1.2 タブ操作
- **新規タブ**: 「+」ボタンをクリック
- **タブ切り替え**: タブをクリック
- **タブ移動**: ドラッグ&ドロップで順序変更

### 2. 設定項目

#### 2.1 音声設定
- **音声読み上げ**: 音声合成機能の有効/無効
- **Claude Code Hooksで読み上げ**: 音声モードの切り替え
- **話者選択**: 音声キャラクターの選択
- **音量調整**: 0-100の範囲
- **読み上げ間隔**: 0-6秒の範囲

#### 2.2 壁紙設定
- **壁紙選択**: デフォルト/アップロード済みから選択
- **壁紙アップロード**: 画像ファイルをアップロード
- **アニメーション**: 動画壁紙の有効/無効

#### 2.3 システム設定
- **作業ディレクトリ**: Claude Code起動時のフォルダ
- **接続状況**: 音声エンジンとの接続状態

### 3. 設定の保存

#### 3.1 自動保存
- **即座保存**: 設定変更時に自動的に保存
- **永続化**: アプリ再起動後も設定を保持
- **同期**: 複数の保存先で設定を同期

#### 3.2 保存先
- **LocalStorage**: UI状態やユーザー設定
- **Electron Store**: システム設定
- **設定ファイル**: ~/.kawaii-code-config/config.json

## トラブルシューティング

### 1. 音声関連

#### 1.1 音声が出ない
- **音声エンジン確認**: AivisSpeechが起動しているか確認
- **再接続**: 設定モーダルの「再接続」ボタンをクリック
- **音声設定**: 音声読み上げが有効になっているか確認

#### 1.2 音声が重複する
- **Hook機能**: 「Claude Code Hooksで読み上げ」をOFFに
- **複数ターミナル**: 他のターミナルでClaude Codeが起動していないか確認

### 2. キャラクター関連

#### 2.1 キャラクターが表示されない
- **VRMビューワー**: Next.jsアプリが正常に起動しているか確認
- **3D描画**: WebGLが利用可能か確認

#### 2.2 表情が変わらない
- **感情分析**: 『』で囲まれたテキストがあるか確認
- **音声連携**: 音声読み上げが有効になっているか確認

### 3. システム関連

#### 3.1 設定が保存されない
- **権限確認**: 設定ファイルの書き込み権限を確認
- **設定クリア**: 破損した設定をクリア

#### 3.2 アプリが起動しない
- **作業ディレクトリ**: 設定された作業ディレクトリが存在するか確認
- **Claude Code**: Claude Code CLIがインストールされているか確認

## 技術情報

### 1. システム要件
- **OS**: macOS, Windows, Linux
- **Node.js**: 18.x以上
- **AivisSpeech**: 音声合成エンジン
- **Claude Code**: Anthropic Claude Code CLI

### 2. 技術スタック
- **メインアプリ**: Electron
- **ターミナル**: xterm.js
- **VRMビューワー**: Next.js (React)
- **3D描画**: three.js
- **音声処理**: Web Audio API

### 3. 設定ファイル
- **メイン設定**: ~/.kawaii-code-config/config.json
- **ユーザー設定**: LocalStorage
- **システム設定**: Electron Store

### 4. デバッグ機能
- **デバッグコンソール**: 開発者ツールで確認
- **グローバル関数**: debugTestVoice(), debugCheckVoiceConnection()
- **設定クリア**: 設定システムのクリア機能

## 更新履歴

### 最新版の機能
- ✅ デュアル音声システム
- ✅ Hook機能との連携
- ✅ 統一設定管理システム
- ✅ VRMキャラクター表示
- ✅ 感情表現システム
- ✅ 壁紙システム
- ✅ タブ管理機能

### 削除された機能
- ❌ キャラクター変更機能
- ❌ チャット入力エリア
- ❌ 旧音声キューシステム
- ❌ バッチ処理機能

---

**重要**: このガイドは現在実装されている機能のみを記載しています。機能の追加や変更により、内容が更新される可能性があります。