# 🎀 KawAIi Code - インストール・使用方法

## 📥 インストール手順

## 📥 インストール（ユーザー向け）

### 配布版ダウンロード
1. GoogleドライブまたはGitHub Releasesから最新の`KawAIi-Code-1.0.0-arm64-app.zip`をダウンロード

2. **隔離属性を削除（重要！）**  
   ダウンロード後、ターミナルを開いて以下のコマンドを実行：
   ```bash
   # ZIPファイルの隔離属性を削除
   xattr -dr com.apple.quarantine /Users/YOUR_USERNAME/Downloads/KawAIi-Code-1.0.0-arm64-app.zip
   ```

3. **ZIPファイルを展開**  
   ZIPファイルをダブルクリックして展開

4. **アプリの隔離属性を削除**  
   展開されたアプリの隔離属性も削除：
   ```bash
   # アプリの隔離属性を削除
   xattr -dr com.apple.quarantine "/Users/YOUR_USERNAME/Downloads/KawAIi Code.app"
   ```

5. **アプリを移動**  
   `KawAIi Code.app`をApplicationsフォルダにドラッグ&ドロップ

6. **起動**  
   アプリをダブルクリックして起動

### ⚠️ 動作要件と制限事項

### 必須要件
- **Claude Code**: 事前にインストールが必要です（後述）
- **macOS 10.15 (Catalina) 以降**: Apple Silicon推奨
- **2GB以上の空きディスク容量**

### オプション機能の要件
- **音声合成機能**: AivisSpeech（ポート10101）が必要
- **フック機能**: Node.js 14以降が必要（通常のターミナルでClaude Codeを使用する場合）

### 既知の制限事項
- **ポート使用**: 8080, 3002が使用されている場合は動作しません
- **Intel Mac**: このバージョンはApple Silicon専用です
- **セキュリティ警告**: 初回起動時に表示されます（署名なしのため）

## ⚠️ なぜ隔離属性の削除が必要？
macOSは、インターネットからダウンロードしたファイルに「隔離属性」を自動で付けます。このアプリは署名がないため「壊れている」として実行を拒否されますが、隔離属性を削除すれば正常に動作します。

### 1. システム要件の確認
- **macOS 10.15 (Catalina) 以降**
- **Apple Silicon Mac (M1/M2/M3)**
- 2GB以上の空きディスク容量

### 2. インストール
1. **DMGファイルをダブルクリック**してマウント
2. **`KawAIi Code.app`をアプリケーションフォルダにドラッグ＆ドロップ**
3. DMGファイルは削除してOK

### 3. 初回起動
1. **アプリケーションフォルダから`KawAIi Code`を起動**
2. **セキュリティ警告が出た場合：**
   - システム環境設定 → セキュリティとプライバシー
   - 「このまま開く」をクリック
   - または：アプリを右クリック → 「開く」

## 🛠️ 事前準備（重要）

### Claude Codeのインストール（重要）
KawAIi Codeを使用するには、Claude Codeが必要です：

1. **Claude Code公式サイト**にアクセス  
   https://docs.anthropic.com/en/docs/claude-code

2. **インストール後、動作確認**
   ```bash
   # ターミナルで以下を実行
   claude --version
   ```

3. **Claude Codeアカウントでログイン**
   ```bash
   claude auth login
   ```

4. **パスの確認（トラブルシューティング用）**
   ```bash
   # Claude Codeがどこにインストールされているか確認
   which claude
   ```
   
   **カスタムパスの設定**（必要な場合のみ）:
   ```bash
   # 環境変数でClaude Codeのパスを指定
   export CLAUDE_PATH=/your/custom/path/to/claude
   ```

## 🎯 使用方法

### 基本操作
1. **KawAIi Code起動**
2. **「Start Claude Code」ボタンをクリック**
3. **Claude Codeと対話開始**
4. **右側に3Dキャラクターが表示・アニメーション**

### VRMキャラクター設定
- **右上の設定ボタン**でVRMキャラクター変更可能
- **デフォルトキャラクター読み込み**または**カスタムVRMファイル**対応

### 音声機能（オプション）
音声読み上げを使いたい場合：
1. [AivisSpeech](https://aivis-project.com/)をダウンロード・起動
2. KawAIi Code上で音声機能が自動有効化

## 🐛 トラブルシューティング

### 起動しない場合
- **再起動**してから試す
- **セキュリティ設定**を確認（システム環境設定 → セキュリティとプライバシー）
- **macOSバージョン**を確認（10.15以降必要）
- **隔離属性**が正しく削除されているか確認

### Claude Codeが動作しない場合
```bash
# Claude Codeの確認
which claude
claude --version

# 権限の確認
chmod +x $(which claude)
```

**エラーメッセージ別の対処法**:
- 「Claude Code executable not found」→ Claude Codeがインストールされていません
- 「Permission denied」→ 権限の問題。`chmod +x`で実行権限を付与してください
- 「Command not found」→ PATHが通っていません。環境変数CLAUDE_PATHを設定してください

### ポート競合エラーの場合
以下のポートが使用されている場合は、他のアプリケーションを終了してください：
- **ポート8080**: WebSocketサーバー用
- **ポート3002**: Next.jsサーバー用
- **ポート10101**: AivisSpeech音声合成用（オプション）

### 音声機能が動作しない場合
- **AivisSpeech**が起動しているか確認
- **ポート10101**が利用可能か確認
- 音声機能はオプションのため、なくても基本機能は動作します

### Intel Macの場合
**申し訳ありませんが、このバージョンはApple Silicon専用です**  
Intel Mac版が必要でしたらお知らせください。

## 📞 サポート

**問題が発生した場合：**
- スクリーンショットと一緒にエラー内容をお知らせください
- システム情報（macOSバージョン、Macの種類）も合わせて教えてください

---

**🎀 Enjoy your Kawaii AI experience! 🎀**