# 🎀 KawAIi Code アップデートログ

## 開発版 - 2025年6月28日

### 🎨 UI/UX改善
**2025/06/28 02:00** - **ヘルプボタンのアイコンを「？」マークに変更**
- ヘルプボタンの歯車アイコンを完全に非表示にし、代わりに「？」マークを表示するように修正。

### 📚 ドキュメント・インストール改善
**2025/06/28 02:30** - **使い方ガイドの内容を最新化**
- README.mdの「特徴」セクションと設定項目を参考に、ヘルプモーダルの内容をアップデート。

### 🐛 バグ修正・安定性向上
**2025/06/28 03:15** - **Claude Code作業ディレクトリ初期化の改善**
- アプリ起動時にホームディレクトリで起動される問題を修正
- `app.whenReady()`内で`appConfig.loadConfig()`を待ってから`claudeWorkingDir`を設定
- `process.chdir()`でアプリ全体の作業ディレクトリを変更し、設定ファイルの作業ディレクトリが確実に適用されるように改善
- 設定読み込みエラー時のフォールバック処理を追加

**2025/06/28 02:45** - **設定移行時のJSONパースエラーを堅牢化**
- `unified-config-manager.js` の `migrateFromLocalStorage` 関数で、`localStorage` からのJSONパースエラーをハンドリング。
- 不正な形式のデータでもアプリケーションがクラッシュせず、生の文字列をフォールバックとして使用するように改善。

## 開発版 - 2025年6月27日

### ✨ 新機能
**2025/06/27 18:00** - **AIアシスタント選択機能を追加 (Claude Code / Gemini Code Assist)**
- アプリ起動時にClaude CodeとGemini Code Assistのどちらを起動するか選択可能に
- 選択されたAIに応じてターミナルを起動

**2025/06/27 18:30** - **AIプロンプト管理の強化と汎用化**
- AI起動時にキャラクター設定と作業ディレクトリ内の`.md`ファイルを統合したプロンプトを生成
- Claude Code向けにはホームディレクトリに`CLAUDE.md`を生成し、停止時に削除
- Gemini Code Assist向けには作業ディレクトリに`GEMINI.md`を生成し、停止時に削除

### 🎨 UI/UX改善
**2025/06/27 19:00** - **AI起動中の開始ボタン無効化**
- AIが起動中の間、「AIアシスタントを開始」ボタンを無効化し、誤操作を防止

**2025/06/27 19:30** - **AI選択モーダルのUI調整**
- 「どちらのAIアシスタントを起動しますか？」のテキストを削除し、ボタン名を「Gemini Code Assist」に修正

### 🐛 バグ修正・安定性向上
**2025/06/27 20:00** - **AI起動時のエラー表示強化とデベロッパーツール自動起動**
- 実行ファイルが見つからない場合などにOSダイアログとアプリ内ステータスバーで詳細なエラーメッセージを表示
- デベロッパーツールを自動で開くように設定し、デバッグを容易に

**2025/06/27 20:30** - **preload.jsのIPC引数渡し修正**
- `terminal.start`メソッドの引数が正しくメインプロセスに渡されない問題を修正

**2025/06/27 21:00** - **`app.js`の構文エラー修正**
- `stopTerminal`メソッド内の`catch`ブロックに関する構文エラーを解消

**2025/06/27 21:30** - **`GEMINI.md`生成時の`claudeWorkingDir`未設定エラー解消**
- `claudeWorkingDir`の初期化と`ConfigManager`への同期タイミングを修正し、`GEMINI.md`が正しく生成されるように改善

### 🔧 システム改善・リファクタリング
**2025/06/27 22:00** - **統一設定管理システム実装完了**
- 分散していた設定管理（localStorage、appConfig.js、個別設定）を統一システムに統合
- 階層化設定管理（runtime → user → ui → default）とStorage Adapter パターン導入
- 既存データの自動マイグレーション機能を実装

**2025/06/27 22:30** - **AIアシスタント名統一とチャット入力削除**
- AIアシスタント名を「クロード」から「ことね」に統一
- チャット入力エリアと送信ボタンを削除し、ターミナル専用UIに変更
- 設定持続性の問題を解決（作業ディレクトリ設定がAI再起動時に正しく適用されるよう修正）

**2025/06/27 23:00** - **バンドルサイズ最適化とUI改善**
- electron-builder最適化により配布サイズを232MB削減（app.asarが140MB→32MB）
- ターミナルサイズを縦方向に拡張（約60px分の表示領域増加）
- アニメーション壁紙の表示位置調整（上部余白問題の改善試行）

**2025/06/27 23:30** - **ターミナルカラーテーマ改善**
- ターミナル配色をアイボリー系テーマに変更（背景:#F0EAD6、文字:#4A3728）
- xterm.jsとCSS背景の両方を統一し、アースカラー系配色で読みやすさを向上
- モノクロ系からより暖かみのある配色に調整

### 🐛 バグ修正・安定性向上  
**2025/06/27 24:00** - **設定モーダル開閉時の話者選択リセット問題を解決**
- syncSettingsToModal関数で統一設定システムからの不適切な読み込みを修正
- updateSpeakerSelect関数に初期化フラグ機能を追加し、初回のみデフォルト設定を適用
- モーダル開閉時に現在の選択状態を保持するよう改善

### 🔧 音声合成システム大幅改善  
**2025/06/28 01:00** - **音声読み上げチャンク分割問題の根本的解決**
- MessageAccumulatorによるチャンク結合システムを導入し、長文メッセージの音声読み上げ欠落問題を修正
- バッチ処理システムからチャンク結合方式へ移行
- 全14個の括弧テキスト完全読み上げを実現

**2025/06/28 01:30** - **スマート完了判定システムの実装**
- isMessageComplete()メソッドで終了マーカー・カギカッコ・句読点を総合判定
- 即座完了システムで条件満足時のタイムアウト待機を回避
- 2重読み上げ問題を根本的に解決
- 重複チェック機能と履歴管理機能を再有効化

**2025/06/28 01:45** - **音声合成エラーハンドリング強化**
- 動的タイムアウト計算（テキスト長に応じて30-120秒）
- 指数バックオフによる再試行機構（最大3回）
- エラー分類システム（network/timeout/server/synthesis/unknown）
- デバッグログの大幅強化（本番環境でも有効）

## 開発版 - 2025年6月26日

### 🔧 パフォーマンス・安定性向上
**2025/06/26 12:30** - **音声キューメモリ使用量制限機能を追加**
- 音声再生キューに最大10個のサイズ制限を実装
- メモリ使用量の無制限増加を防止し、アプリの安定性を向上

**2025/06/26 11:45** - **アプリアイコンを新デザインに更新**
- オレンジ色の立体的なキューブデザインに変更
- 透過背景対応でmacOS/Windows/Linux全プラットフォーム対応

## 開発版 - 2025年6月25日

### 🖼️ 壁紙機能改善
**2025/06/25 15:45** - **デフォルト壁紙アニメーション機能を追加・UI調整**
- 設定画面に「デフォルト壁紙のアニメーション」ON/OFFトグルを追加
- ON時は時間帯に応じて.mp4動画を背景にループ再生、OFF時は既存の静止画背景を表示するように変更

**2025/06/25 14:00** - **時間帯別デフォルト壁紙自動切り替え機能を追加**
- 複数枚のデフォルト壁紙を時間帯（早朝、昼、夕方、夜中）に応じて自動で切り替える機能を追加
- アプリ起動中も壁紙が自動で切り替わるようにタイマーを実装

**2025/06/25 14:00** - **壁紙アップロード機能の改善**
- アップロード済み壁紙のリセット機能（ボタン・ロジック）を削除

### 🎭 キャラクター機能強化
**2025/06/25 13:13** - **全キャラクター設定統合とキャラクター変更機能を追加**
- 4つのキャラクター（照れ屋、元気娘、クーデレ、ツンデレ）を統合実装
- 会話中のキャラクター変更機能を追加
- デフォルトキャラクターを照れ屋に設定

**2025/06/25 13:05** - **設定画面からキャラクター選択UIを削除**
- よりシンプルな操作体験のため設定画面のキャラクター選択を削除
- 会話ベースでのキャラクター変更に統一

### 📚 ドキュメント・インストール改善
**2025/06/25 13:02** - **macOS隔離属性対応のインストール手順を追加**
- macOSセキュリティ対応の詳細なインストール手順を追加
- xattrコマンドによる隔離属性削除方法を明記

### ⚙️ 設定・システム機能
**2025/06/25 02:51** - **設定画面にキャラクター選択機能を追加**
- UIでのキャラクター選択機能を実装（後に削除）

**2025/06/25 02:27** - **ホームディレクトリにCLAUDE.md自動生成機能を追加**
- アプリ起動時の自動CLAUDE.md生成を実装
- プロジェクト固有設定の統合機能を追加

### 🐛 バグ修正
**2025/06/25 02:36** - **存在しないupdateSpeechHistoryStatusメソッドの呼び出しを削除**
- アプリクラッシュの原因となっていた不要なメソッド呼び出しを修正

**2025/06/25 02:31** - **preload.jsにosモジュールを追加してCLAUDE.md生成を修正**
- CLAUDE.md生成エラーを解決

### 🎨 UI改善
**2025/06/25 00:51** - **読み上げ履歴管理UI項目を削除**
- UIをシンプル化

---

## v1.0.0 - 2025年6月24日

### 🚀 α版リリース
**2025/06/24 15:32** - **パッケージ化アプリでのClaude Code起動問題を解決**
- 正式版での重要なバグを修正

**2025/06/24 01:32** - **アプリ使い方ガイド機能を追加**
- 初心者向けの詳細なヘルプ機能を実装

**2025/06/24 01:09** - **キャラクター設定システム実装**
- 複数キャラクター対応の基盤システムを構築

**2025/06/24 00:31** - **配布用アプリアイコンを作成・設定完了**
- 正式版リリースに向けたアイコン実装

### 🔧 技術改善
**2025/06/24 00:13** - **静的ファイル配信への移行でERR_FILE_NOT_FOUNDエラーを解決**
- ファイル読み込みエラーを根本解決

---

## Beta版期間 - 2025年6月18日〜23日

### 🎭 VRM・3Dキャラクター機能
**2025/06/23 01:21** - **VRMビューワーをElectronアプリに完全統合**
- 3Dキャラクター表示機能の完全実装

**2025/06/19 23:41** - **口パク機能完成！**
- 音声に同期したリアルタイム口パク機能を実装

**2025/06/19 22:48** - **VRM口パク機能の実装**
- LipSync機能の基盤実装

### ⚡ パフォーマンス最適化
**2025/06/23 19:45** - **LipSyncサンプルレートを半分に削減**
- CPU使用量を大幅削減

**2025/06/23 19:42** - **VRMビューアーのフレームレートを35fpsに制限**
- さらなるパフォーマンス向上

**2025/06/19 23:55** - **パフォーマンス最適化 - CPU使用量大幅削減**
- アプリ全体のパフォーマンス向上

### 🎤 音声機能強化
**2025/06/21 22:29** - **ストリーミング読み上げ機能を実装し音声入力を一時無効化**
- リアルタイム音声読み上げ機能を追加

**2025/06/21 18:01** - **Google Cloud Speech APIに音声認識を移行してエラー解消**
- 音声認識精度の向上

**2025/06/22 02:01** - **デフォルトキャラクターを照れ屋に変更**
- ユーザーフィードバックに基づくキャラクター設定変更

### 🎨 UI/UXの大幅改善
**2025/06/19 14:42** - **UI改善 - 3Dキャラクター表示領域拡張とデザイン調整**
- より見やすく魅力的なUI設計

**2025/06/18 12:21** - **Vtuber配信風UIに大幅リニューアル**
- 現代的で親しみやすいデザインに変更

**2025/06/18 13:03** - **クイックボタン削除と可愛いターミナルデザイン**
- シンプルで使いやすいインターフェース

---

## Alpha版期間 - 2025年6月16日〜18日

### 🎉 プロジェクト開始
**2025/06/18 00:11** - **AivisSpeech音声合成機能とElectronアプリの実装**
- 音声合成機能の初期実装

**2025/06/16 23:36** - **Initial commit**
- プロジェクト開始

---

## 📊 統計情報

- **総コミット数**: 100+
- **開発期間**: 9日間
- **主要機能数**: 20+機能
- **開発段階**: Alpha → Beta → v1.0.0 → 開発版（テスト中）

## 🎯 今後の予定

現在テスト段階です。安定性の確認が取れ次第、正式バージョンとしてリリース予定です。
ユーザーの皆様からのフィードバックをお待ちしております。

---

*このアップデートログは開発チームによって手動で管理されています。*